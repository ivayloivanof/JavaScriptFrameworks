"use strict";angular.module("IssueTrackingSystem.controllers.issue",[]).config(["$routeProvider",function(a){a.when("/issues",{templateUrl:"app/issue/partials/issues.html",controller:"Issue"}).when("/issues/:id",{templateUrl:"app/issue/partials/issue-view.html",controller:"Issue"}).when("/issues/:id/edit",{templateUrl:"app/issue/partials/issue-edit.html",controller:"Issue"}).when("/projects/:id/add-issue",{templateUrl:"app/issue/partials/issue-add.html",controller:"Issue"})}]).controller("Issue",["$scope","debug","pageNumber","issues","$routeParams","$route","$location",function(p,d,m,j,o,l,i){p.page=m;function c(){var q;p.labels="";for(q in p.issue.Labels){p.labels+=p.issue.Labels[q].Name+","}p.labels=p.labels.replace(/,(\s+)?$/,"")}p.getAllIssues=function g(){j.getAllIssues("In Progress",31,1000,1).then(function(q){d?console.log("All issues:",q):"";p.issues=q.data.Issues})};p.getIssueById=function e(){j.getIssuesById(o.id).then(function(q){d?console.log("Route params:",o):"";d?console.log("Issue by Id:",q):"";p.issue=q.data;c()})};p.getIssueByProjectId=function n(){j.getIssuesByProjectId(o.id).then(function(q){d?console.log("Route params:",o):"";d?console.log("Issues by Project Id:",q):"";p.issues=q.data})};p.getAllCommentsByIssueId=function b(){j.getAllIssueComments(o.id).then(function(q){d?console.log("Route params:",o):"";d?console.log("All Comments:",q):"";p.comments=q.data})};p.getMyIssues=function(){console.log(m);j.getMyIssues(m).then(function(q){d?console.log("All my issues:",q):"";p.issues=q.data.Issues})};p.nextPage=function k(q){console.log(q)};p.prevPage=function h(q){console.log(q)};p.addIssue=function a(q){var r={Title:q.title,Description:q.description,DueDate:q.dueDate,ProjectId:q.projectId,AssigneeId:q.assigneeId,PriorityId:q.priorityId,Labels:[]};q.labels=q.labels.split(",");q.labels.forEach(function(s){r.Labels.push({Name:s.trim()})});j.addIssue(r).then(function(s){d?console.log("Add issue success:",s):"";i.path("/")})};p.editIssue=function(r){var q={Id:o.id,AssigneeId:r.assigneeId,Title:r.title,Description:r.description,DueDate:r.dueDate,PriorityId:r.priority,Labels:[]};r.labels=r.labels.split(",");r.labels.forEach(function(s){q.Labels.push({Name:s.trim()})});console.log(q);j.editIssueById(o.id,q).then(function(s){d?console.log("Route params:",o):"";d?console.log("Edited issue:",s):"";i.path("/issues/"+o.id)})};p.addComment=function f(s,q){var r={Author:q,CreatedOn:new Date(),Text:s.text};j.addCommentToIssue(o.id,r).then(function(t){d?console.log("Route params:",o):"";d?console.log("Add Comment success:",t):"";l.reload()})}}]);