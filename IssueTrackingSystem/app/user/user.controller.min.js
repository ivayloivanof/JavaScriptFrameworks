"use strict";angular.module("IssueTrackingSystem.controllers.user",[]).config(["$routeProvider",function(a){a.when("/profile/password",{templateUrl:"app/user/partials/change-password.html",controller:"User"}).when("/users",{templateUrl:"app/user/partials/users-all.html",controller:"User"})}]).controller("User",["$scope","debug","$location","authentication","$sessionStorage","users","$route",function user(m,a,g,i,l,d,k){m.getAllUsers=function(){d.getAllUsers().then(function(n){a?console.log("All users:",n):"";m.allUsers=n.data})};m.loginUserInSystem=function(n){i.loginUser(n).then(function(o){l.isAuthenticated=true;l.access_token=o.data.access_token;l.token_type=o.data.token_type;l.username=o.data.userName;d.getCurrentUser().then(function(p){l.isAdmin=p.data.isAdmin;l.Id=p.data.Id;a?console.log("Current user:",p):""},function(p){console.error(p)});a?console.log("Logged user:",o):"";g.path("/login")},function(o){console.error(o)})};m.registerUserInSystem=function(n){i.registerUser(n).then(function(p){var o={username:n.email,password:n.password};a?console.log(p):"";m.loginUserInSystem(o)},function(o){console.error(o)})};m.changeUserPassword=function b(n){d.changePassword(n).then(function(o){a?console.log("Changed password:",o):"";g.path("/")},function(o){console.error(o)})};m.logoutUser=function(){i.logout();g.path("/logout")};m.hasLogged=function h(){if(l.isAuthenticated){return true}l.isAuthenticated=false;g.path("/")};m.getCurrentUser=function c(){d.getCurrentUser().then(function(n){a?console.log("Current User:",n):"";m.currentUser=n.data})};m.makeAdmin=function(n){d.makeUserAdmin(n).then(function(o){a?console.log("User changed to admin:",o):"";k.reload()})};m.isAdmin=function j(){if(l.isAdmin){return true}return false};m.isLead=function e(){if(l.LeadId===l.Id){return true}return false};m.isAssignee=function f(){if(l.AssigneeId===l.Id){return true}return false}}]);