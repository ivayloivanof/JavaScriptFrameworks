"use strict";angular.module("IssueTrackingSystem.controllers.user",[]).config(["$routeProvider",function(a){a.when("/profile/password",{templateUrl:"app/user/partials/change-password.html",controller:"User"}).when("/users",{templateUrl:"app/user/partials/users-all.html",controller:"User"})}]).controller("User",["$scope","debug","$location","authentication","$sessionStorage","users",function user(k,a,f,h,j,d){k.getAllUsers=function(){d.getAllUsers().then(function(l){a?console.log("All users:",l):"";k.allUsers=l.data})};k.loginUserInSystem=function(l){h.loginUser(l).then(function(m){j.isAuthenticated=true;j.access_token=m.data.access_token;j.token_type=m.data.token_type;j.username=m.data.userName;d.getCurrentUser().then(function(n){j.isAdmin=n.data.isAdmin;j.Id=n.data.Id;a?console.log("Current user:",n):""},function(n){console.error(n)});a?console.log("Logged user:",m):"";f.path("/login")},function(m){console.error(m)})};k.registerUserInSystem=function(l){h.registerUser(l).then(function(n){var m={username:l.email,password:l.password};a?console.log(n):"";k.loginUserInSystem(m)},function(m){console.error(m)})};k.changeUserPassword=function b(l){d.changePassword(l).then(function(m){a?console.log("Changed password:",m):"";f.path("/")},function(m){console.error(m)})};k.logoutUser=function(){h.logout();f.path("/logout")};k.hasLogged=function g(){if(j.isAuthenticated){return true}j.isAuthenticated=false;f.path("/")};k.getCurrentUser=function c(){d.getCurrentUser().then(function(l){a?console.log("Current User:",l):"";k.currentUser=l.data})};k.isAdmin=function i(){if(j.isAdmin){return true}return false};k.isLead=function e(){if(j.LeadId===j.Id){return true}return false}}]);